\RequirePackage[most]{tcolorbox}
\RequirePackage{wrapfig}
\RequirePackage{varwidth}

\usetikzlibrary{calc,babel,shapes,positioning,decorations.pathmorphing}

\definecolor{myorange}{RGB}{240, 147, 81}

\newtcolorbox{defi}[1][]{
    enhanced,
    before skip=2mm,
    after skip=2mm,
    colback=orange!10,
    colframe=orange!30!black,
    boxrule=0.2mm,
    attach boxed title to top left={xshift=0.5cm,yshift*=1mm-\tcboxedtitleheight},
    varwidth boxed title*=-0.5cm,
    fonttitle=\bfseries,
    colbacktitle=myorange,
    oversize=-2cm,
    overlay = {
        \node (myfirstpic) at (frame.north east) {\rotatebox[]{345}{\includegraphics[width=1cm]{images/question.png}}};
    },
    boxed title style={
        frame code={
        \path[fill=tcbcolback!60!black]
        ([yshift=-1mm,xshift=-1mm]frame.north west)
        arc[start angle=0,end angle=180,radius=1mm]
        ([yshift=-1mm,xshift=1mm]frame.north east)
        arc[start angle=180,end angle=0,radius=1mm];
        \path[left color=tcbcolback!60!black,right color=tcbcolback!60!black,
        middle color=tcbcolback!80!black]
        ([xshift=-2mm]frame.north west) -- ([xshift=2mm]frame.north east)
        [rounded corners=1mm]-- ([xshift=1mm,yshift=-1mm]frame.north east)
        -- (frame.south east) -- (frame.south west)
        -- ([xshift=-1mm,yshift=-1mm]frame.north west)
        [sharp corners]-- cycle;
        },interior engine=empty,
    },
    #1
}

\newtcolorbox{fact}[1][]{
    enhanced,
    breakable,
    skin=enhancedlast jigsaw,
    sharp corners,
    shadow = {0.5mm}{-0.5mm}{0pt}{red!90!white!80!black},
    parbox=false,
    title={My title}~,
    varwidth boxed title=0.7\linewidth,
    colframe=red!90!white!60!black,
    oversize=-2cm,
    overlay = {
        \draw (frame.north east) ++ (90:0.9)  node {\rotatebox[]{345}{\includegraphics[width=1cm]{images/exclamation_mark.png}}};
    },
    attach boxed title to top left={xshift=-2mm,yshift=-0.5mm},
    interior style={top color=red!10!white!50!white,bottom color=white},
    boxed title style={empty,arc=0pt,outer arc=0pt,boxrule=0pt},
    underlay boxed title={
        \fill[red!90!white!60!black] (title.north west) -- (title.north east)
        -- +(\tcboxedtitleheight-1mm,-\tcboxedtitleheight+1mm)
        -- ([xshift=2mm,yshift=0.5mm]frame.north east) -- +(0mm,-1mm)
        -- (title.south west) -- cycle;
        \fill[red!90!white!20!black] ([yshift=-0.5mm]frame.north west)
        -- +(-0.2,0) -- +(0,-0.3) -- cycle;
        \fill[red!90!white!20!black] ([yshift=-0.5mm]frame.north east)
        -- +(0,-0.3) -- +(0.2,0) -- cycle; 
    },
    #1
}





\usetikzlibrary{calc,babel,shapes,positioning,decorations.pathmorphing}


\newtcolorbox{demo}[1][]{
    enhanced jigsaw, 
    breakable, 
    width = \dimexpr\linewidth-1pt\relax,
    colframe   = black!80,
    colback    = black!1,
    boxsep     = -5pt,
    top        = 10pt,
    bottom     = 10pt,
    boxrule    = 1pt,
    after      = \phantom z,
    fonttitle  = \bfseries\scshape,
    coltitle   = black,
    before upper={\parindent=\baselineskip},
    % 
    sharp corners,
    frame hidden,
    opacityback = 0,
    boxsep = 0pt,
    left = \baselineskip/3,
    % Title
    title = D\'emonstration,
    attach boxed title to top left = {
        xshift  = \tcboxedtitleheight/2,
        yshift* = -\tcboxedtitleheight/2},
    boxed title style = {
        arc is angular,
        opacityback = 0,
        boxsep      = \baselineskip/3,
        boxrule     = 0.05\baselineskip,
        colframe    = black, 
        arc         = \baselineskip/4,
        },
    % Code
    extras first  = {
        finish = {\path[draw = black, line width = 0.05\baselineskip] (title.west) -- (frame.north west) -- (frame.south west);},
        },
    extras middle = {
        finish = {\path[draw = black, line width = 0.05\baselineskip] (frame.north west) -- (frame.south west);},
        },
    extras last   = {
        finish = {
        \path[draw = black, line width = 0.05\baselineskip] (frame.north west) -- (frame.south west) -- (frame.south east) -- ([yshift=3\baselineskip/2]frame.south east);
        \path[fill = black] ([yshift=3\baselineskip/2]frame.south east) circle (0.12);},
        },
    extras unbroken = {
        finish = {
        \path[draw = black, line width = 0.05\baselineskip] (title.west) -- (frame.north west) -- (frame.south west) -- (frame.south east) -- ([yshift=3\baselineskip/2]frame.south east);
        \path[fill = black] ([yshift=3\baselineskip/2]frame.south east) circle (0.12);}
        },
        #1}

\newtcolorbox{prop}[1][]{
    enhanced jigsaw, 
    breakable, 
    width = \dimexpr\linewidth-1pt\relax,
    colframe   = black!80,
    colback    = black!1,
    boxsep     = -5pt,
    top        = 10pt,
    bottom     = 10pt,
    boxrule    = 1pt,
    after      = \phantom z,
    fonttitle  = \bfseries\scshape,
    coltitle   = black,
    before upper={\parindent=\baselineskip},
    %
    sharp corners,
    shadow     = {0.7mm}{-0.7mm}{0pt}{black!95},
    % Title
    title = Proposition,
    attach boxed title to top left = {
        xshift  =  \tcboxedtitleheight/2,
        yshift* = -\tcboxedtitleheight/2,
    },
    boxed title style = {
        sharp corners,
        colframe   = black!80,
        colback    = black!1,
        boxrule    = 1pt,
        shadow     = {0.35mm}{-0.35mm}{0pt}{black!95},
    },
    #1,
}


\newtcolorbox{definition}[1][]{
    enhanced jigsaw, 
    breakable, 
    width = \dimexpr\linewidth-1pt\relax,
    colframe   = black!80,
    colback    = black!1,
    boxsep     = -5pt,
    top        = 10pt,
    bottom     = 10pt,
    boxrule    = 1pt,
    after      = \phantom z,
    fonttitle  = \bfseries\scshape,
    coltitle   = black,
    before upper={\parindent=\baselineskip},
    %
    fuzzy halo = 3pt with black!80,
    arc        = 5pt, 
    %
    title = D\'efinition,
    attach boxed title to top left = {
        xshift  =  \tcboxedtitleheight/2,
        yshift* = -\tcboxedtitleheight/2,
    },
    boxed title style = {
        colframe   = black!80,
        colback    = black!1,
        boxrule    = 1pt,
        arc        = 5pt,
        fuzzy halo = 1.5pt with black!80,
    },
    #1,
}



\newtcolorbox{rmq}[1][]{
    enhanced jigsaw, 
    breakable, 
    width = \dimexpr\linewidth-1pt\relax,
    colframe   = blue!80,
    colback    = blue!1,
    boxsep     = -5pt,
    top        = 10pt,
    bottom     = 10pt,
    boxrule    = 1.5pt,
    after      = \phantom z,
    fonttitle  = \bfseries\scshape,
    coltitle   = black,
    before upper={\parindent=\baselineskip},
    %
    sharp corners,
    title = Note,
    attach boxed title to top left = {
        xshift  =  \tcboxedtitleheight/2,
        yshift* = -\tcboxedtitleheight/2,
    },
    boxed title style = {
        interior style = {
            top color = white, 
            bottom color = blue!1,
        },
        sharp corners, 
        frame hidden, 
        boxrule = 0pt, 
        boxsep = 0pt,
    },
    #1,
}
